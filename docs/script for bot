Usage notes
Variables are in brackets like [department], [summary], [agent_status], [caller_name], [callback_window].

Allow barge-in at all times; any user intent like “agent,” “human,” “operator” triggers immediate transfer path.

Use concise, concrete prompts; avoid double questions; keep each step atomic.

If emergency intent is detected at any time, jump to Emergency Transfer.

Stage 1: Greeting and choice
“"Hello, thanks for calling. I’m your automated assistant. You can speak with a human now, but wait times may be longer. If you stay with me, I’ll help quickly or connect you to the right department."”

If caller indicates wish to be transferred:

“Sure, connecting you to the next available agent. Please hold.”

If caller indicates agreement with continuing:

“Great. How can I help today? A short description is perfect.”

Emergency transfer
Trigger when panic/urgent distress: “You will be connected to an emergency dispatcher. Please stay on the line.”

Stage 2: Request capture
“Please describe your issue in as much detail as you’re comfortable with.”

If no speech or unclear:

First reprompt: “I didn’t catch that. In one or two sentences, what happened?”

Second reprompt: “Still having trouble. You can say ‘agent’ to speak with a person, or continue with a brief summary.”

Stage 3: Sentiment-aware branching (runs continuously)
Low frustration:

Proceed normally.

Medium frustration:

“I understand this is important. I’m locating an agent in [department]. I’ll keep questions brief so we can connect you as soon as possible.”

Skip re-verification of personal info unless essential; prepare transfer.

High frustration:

“I hear your concern. I’m connecting you with the next available agent in [department] right away. Please hold.”

Fast-track transfer.

Stage 4: Personal info capture (low frustration only)
“May I have your full name?”

“Do you have a customer or account number?”

“What’s the best callback number if we get disconnected?”

If hesitant about sharing data:

“Totally fine. We can proceed without it and share details with the agent.”

Optional compliance (if recording/consent needed):

Stage 5: Readback and confirm
“Here’s what I have: [summary]. Department: [department]. Is that correct?”

If no:

“Thanks. What needs to be corrected?” Then update [summary]/[department] and repeat: “Updated: [summary]. Department: [department]. Is that correct now?”

If yes:

“Got it.”

Stage 6: Ticket finalize and routing
Create ticket and attach sentiment label when applicable (labels like frustrated or angry are internal; do not read labels aloud).

If agent available ([agent_status] = available):

“I’ve notified [department]. Connecting you now. Please hold.”

If no agent available ([agent_status] = unavailable):

“I’ve sent a detailed ticket to [department]. You can wait on the line for the next available agent, or get a callback. Which do you prefer?”

If wait:

“Okay, I’ll keep you on the line and notify you as soon as someone is free.”

If callback:

“What time window works best for a callback today or tomorrow?” [capture preferred window]

“Perfect. If we miss you in [callback_window], shall we leave a voicemail?” [yes/no]

“All set. You’ll receive a confirmation at this number. If anything changes, reply ‘RESCHEDULE’ to adjust.”

Closing
If transferred: “Connecting now. Thanks for your patience.”

If callback: “Thanks for your time. We’ll be in touch within [callback_window]. Have a good day.”

If resolved without transfer: “Happy to help. If anything else comes up, just say ‘agent’ or describe your request.”

Interruption and fallback controls
Barge-in: Always enabled; if caller says “agent,” “representative,” “human,” or “operator,” jump to agent transfer.

Silence timeouts:

5 seconds: gentle reprompt.

10 seconds: offer agent/continue choice.

15 seconds: “I’ll send a ticket summarizing what we discussed and arrange a callback,” then capture callback.

Avoid over-apology loops; acknowledge once, then act.

Keep confirmation questions binary: “Is that correct?” yes/no.

Sentiment thresholds to actions
Low: Full flow (info capture → readback → transfer/callback).

Medium: Assure, skip re-verification steps, prepare transfer; ticket tagged internally as frustrated.

High: Assure and transfer immediately; ticket tagged internally as angry.

JSON ticket schema
id: string (ULID/UUID)

timestamp_utc: string

caller_phone: string

caller_name: string|null

customer_id: string|null

summary: string

department: string

labels: array of strings (e.g., ["frustrated"])

contact:

callback_number: string

voicemail_ok: boolean

preferred_window: string|null

transcript_excerpt: string

handoff_status: enum [queued, transferred, callback_scheduled, closed]

Example
{
"id": "01HF0C3A6N3Z8PME4P7Z9WJ2BQ",
"timestamp_utc": "2025-11-07T20:45:00Z",
"caller_phone": "+351-9XX-XXX-XXX",
"caller_name": "Alex Doe",
"customer_id": "C123456",
"summary": "Cannot access online billing; login fails with 2FA error since yesterday.",
"department": "Billing Support",
"sentiment_level": "medium",
"labels": ["frustrated"],
"contact": {
"callback_number": "+351-9XX-XXX-XXX",
"voicemail_ok": true,
"preferred_window": "Tomorrow 10:00–12:00"
},
"transcript_excerpt": "…I keep getting a two-factor code error…",
"handoff_status": "queued"
}

SSML and recognition hints (optional)
Keep pace steady; short sentences aid recognition.

Numbers: say-as digits for IDs; say-as cardinal for counts.

Example: “Please read your account number digit by digit.”

Compact prompt block (copy/paste)
Greeting: “Hello, this is your automated assistant. Say ‘agent’ to speak with a person, or say ‘continue’ to describe your request.”

Emergency: “You will be connected to an emergency dispatcher. Please stay on the line.”

Request: “Please describe your issue in one or two sentences.”

Medium frustration: “I understand. I’m locating an agent in [department] and will keep questions brief.”

High frustration: “I’m connecting you to the next available agent in [department] now. Please hold.”

Info capture: “What’s your full name?” “Do you have a customer or account number?” “What’s the best callback number?”

Readback: “Here’s what I have: [summary]. Department: [department]. Is that correct?”

Transfer available: “Connecting you now. Please hold.”

Transfer unavailable: “I’ve submitted a detailed ticket. Would you like to wait on the line, or get a callback?”

Callback: “What time window works best?” “May we leave a voicemail if we miss you?”

Closing: “Thank you. You’ll receive a confirmation. Have a good day.”
